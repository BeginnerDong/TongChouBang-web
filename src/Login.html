<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1">
		<title>特色会场</title>
		<link type="text/css" rel="stylesheet" href="../css/bootstrap.css" />
		<link type="text/css" rel="stylesheet" href="../css/style.css" />
		<script type="text/javascript" src="../js/jquery-2.1.4.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		
		<script src="../js/base.js" type="application/javascript"></script>
		<script src="../js/rem.js"></script>
	
		<style>
			html,
        body {
            height: 100%;
            width: 100%;
        }

        .tab_login {
            width: 600px;
            margin: 0 auto;
            border-bottom: 1px solid #999999;
            padding-bottom: 9px
        }

        .login_sign {
            width: 800px;
            margin: 0 auto;
            /* border: 2px solid #222222; */
            background: #ffff;
            box-shadow: #222222 1px 0px 10px;
            /* position: absolute; */
            /* transform: translateY(-50%) translateX(-50%);
            top: 50%;
            left: 50%;
 */
        }

        .tab_login .login_lab1,
        .tab_login .login_lab2 {
            float: left;
            width: 50%;
            text-align: center;
			cursor: pointer;
        }

        .update_lab1 {
            text-align: center;
            font-size: 26px;
            color: #ff556f;
            font-family: "MicrosoftYaHei";
        }

        .update_lab1 span {
            border-bottom: 2px solid #ff0c0c;
            padding-bottom: 8px;
        }

        .tab_login .login_lab1 {
            font-size: 26px;
            color: #ff556f;
            font-family: "MicrosoftYaHei";
        }

        .active {
            border-bottom: 2px solid #ff0c0c;
            padding-bottom: 12px;
        }

        .tab_login .login_lab2 {
            font-size: 20px;
            color: #999999;
            font-family: "MicrosoftYaHei";
            line-height: 38px;
        }

        .txt_login_k {
            width: 431px;
            margin: 50px auto;
            /* border: 1px solid red; */
            /* height: 300px; */
        }

        .login_li {
            width: 410px;
            height: 60px;
            border: 1px solid #ff0c0c;
            line-height: 60px;
            padding-left: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
        }

        .login_icon {
            width: 16px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }

        .l_name {
            background: url("../img/login-icon.png") no-repeat center;
        }

        .l_pwd {
            background: url("../img/login-icon1.png") no-repeat center;
        }

        .l_tel {
            background: url("../img/telicon.png") no-repeat center;
        }

        .l_adress {
            background: url("../img/adressicon.png") no-repeat center;
        }

        .l_user {
            background: url("../img/namecion.png") no-repeat center;
        }

        .txt_sr {
            margin-left: 10px;
            width: 340px;
            height: 35px;
            font-size: 19px;
            outline: none;
            border: none;
        }

        .update_pwd {
            font-size: 18px;
            color: #666666;
            font-family: "MicrosoftYaHei";
        }

        #loginbtn {
            width: 100%;
            height: 70px;
            background: #ff556f;
            color: #fff;
            margin-top: 40px;
            font-size: 24px;
            border: none;
            border-radius: 8px;
        }

        #signinbtn {
            width: 100%;
            height: 70px;
            background: #ff556f;
            color: #fff;
            margin-top: 40px;
            font-size: 24px;
            border: none;
        }

        #updatebtn1 {
            width: 100%;
            height: 70px;
            background: #ff556f;
            color: #fff;
            margin-top: 40px;
            font-size: 24px;
            border: none;
        }

        .bookcion {
            width: 24px;
            height: 20px;
            display: inline-block;
            background: url("../img/icon .png");
            vertical-align: middle;
        }

        .sign_in {
            display: none;
        }

        .from_1 {
            padding: 80px 100px
        }

        #signinbtn {
            border-radius: 8px;
        }

        .zdc_3 {
            padding: 50px;
        }

        @media screen and (max-width:800px) {
            .login_sign {
                width: 100%;
            }

            .from_1 {
                padding: 31px 11px
            }

            .tab_login {
                width: auto;
            }

            .txt_login_k {
                width: 100%;
            }

            .login_li {
                width: 100%;
                padding: 0px;
                border: none;
                border-bottom: 1px solid #cac9c9;
            }

            .txt_sr {
                width: auto;
            }

            .login_icon {
                margin-left: 10px;
            }

            .zdc_2 {
                width: 100%;
            }

            .zdc_3 {
                padding: 10px;
            }
        }
    </style>
	</head>

	<body>
		<!-- 头部 -->
		<!-- 头部 -->
		<div id="app">
			<header class="clear head_top">
				<div class="clear">
					<!--logo-->
					<div class="head_logo">
						<span class="logo">统筹帮</span>
						<!-- <select class="tab_adress">
							<option>北京</option>
							<option>上海</option>
						</select> -->
					</div>
					<!--导航栏-->
					<nav class="head_nav">
						<ul class="clear">
							<li><a href="index.html">首页</a></li>
							<li><a href="TeSe.html">找特色会场</a></li>
							<li><a href="Print.html">找印刷商</a></li>
							<li><a href="PartTime.html">找兼职</a></li>
							<li id="nav2btn"><a>会议配套服务</a>
								<ul class="clear nav_2 ycxiala" id="nav2">
									<li><a href="ConferenceBuffet.html">会议自助餐</a></li>
									<li><a href="Lease.html">活动道具租赁</a></li>
									<li><a href="Advertising.html">线下广告</a></li>
									<li><a href="GiftPurchasing.html">礼品采购</a></li>
								</ul>
							</li>
							<li><a href="ShopTransfer.html">店铺转让</a></li>
						</ul>
					</nav>
					<div class="nav_small">
						<button class="nav_btn" id="btnnav">
							<span></span>
							<span></span>
							<span></span>
						</button>
						<div class="clear"></div>
						<ul class="clear small_nav orgin" id="snav">
							<li><a href="index.html">首页</a></li>
							<li><a href="TeSe.html">找特色会场</a></li>
							<li><a href="Print.html">找印刷商</a></li>
							<li><a href="PartTime.html">找兼职</a></li>
							<li><a id="smnavbtn">会议配套服务</a>
								<ul class="clear smallnav2 smycxiala" id="smnav2">
									<li><a href="ConferenceBuffet.html">会议自助餐</a></li>
									<li><a href="Lease.html">活动道具租赁</a></li>
									<li><a href="Advertising.html">线下广告</a></li>
									<li><a href="GiftPurchasing.html">礼品采购</a></li>
								</ul>
							</li>
							<li><a href="ShopTransfer.html">店铺转让</a></li>
							<li class="li_bg"><a href="Login.html">登录注册</a></li>
							<li><a href="MyCenter.html">个人中心</a></li>
							<li><a href="Apply.html">申请入驻</a></li>
							<li><a href="Help.html">帮助中心</a></li>
						</ul>
					</div>

					<!--个人中心-->
					<div class="head_abnoutus">
						<ul class="clear">
							<li class="active"><a href="Login.html">登录注册</a></li>
							<li><a href="MyCenter.html">个人中心</a></li>
							<li><a href="Apply.html">申请入驻</a></li>
							<li><a href="Help.html">帮助中心</a></li>
						</ul>
					</div>
					<div class="me_rk" style="float: right">
						<div class="btn_me"><img id="btn_me" src="../img/meicon.png" /></div>

						<ul class="me_list" id="me_list">
							<li><a href="Login.html">登录注册</a></li>
							<li><a href="MyCenter.html">个人中心</a></li>
							<li><a href="Apply.html">申请入驻</a></li>
							<li><a href="Help.html">帮助中心</a></li>
						</ul>
					</div>

				</div>
			</header>
			<!--登录注册修改密码-->
			<div style="background: #f5f5f5;height: 100%;width: 100%;padding-top:50px">
				<div class="login_sign" style="">
					<div  class="from_1">
						<div class="clear tab_login login_yc">
							<div class="login_lab2"  id="logintab" @click="changeType('login')"><span :class="isLogin?'active':''">账号登录</span></div>
							<div class="login_lab2"  id="signintab" @click="changeType('register')"><span :class="!isLogin?'active':''">账号注册</span></div>
						</div>
						<div class="clear tab_login sign_in" id="updatesign" >
							<div class="update_lab1" id="updatetab"><span>修改密码</span></div>
						</div>
						<div class="txt_login_k" v-if="isLogin&&!isPsd">			
							<div class="k_name login_li login_yc" >
								<span class="l_name login_icon"></span><input type="text" id="i_name" class="txt_sr" placeholder="账号" v-model="submitData.login_name"/>
							</div>
							<div class="k_pwd login_li login_yc">
								<span class="l_pwd login_icon"></span><input type="password" id="i_pwd" class="txt_sr" placeholder="用户密码" v-model="submitData.password"/>
							</div>	
							<a class="update_pwd" id="updatebtn" @click="changeType('psd')">修改密码</a>
							<button id="loginbtn" @click="submit">登录</button>						
						</div>
						<div class="txt_login_k" v-if="!isLogin&&!isPsd">
							<div class="k_user login_li  sign_yc"  >
								<span class="l_user login_icon"></span><input type="text"  class="txt_sr" placeholder="姓名" v-model="submitData.name"/>
							</div>
						
							<div class="k_tel login_li  sign_yc">
								<span class="l_tel login_icon"></span><input type="text"  class="txt_sr" placeholder="手机号"  v-model="submitData.phone"/>
							</div>
							<div class="k_adress login_li  sign_yc">
								<span class="l_adress  login_icon"></span><input type="text"  class="txt_sr" placeholder="地区"  v-model="submitData.address"/>
							</div>
							<div class="k_name login_li login_yc" >
								<span class="l_name login_icon"></span><input type="text"  class="txt_sr" placeholder="账号"  v-model="submitData.login_name"/>
							</div>
							<div class="k_pwd login_li login_yc" >
								<span class="l_pwd login_icon"></span><input type="text"  class="txt_sr" placeholder="用户密码"  v-model="submitData.password"/>
							</div>
							
							<img src="../img/checkbox.png" v-if="!isSelect" style="width: 16px;height: 16px;" @click="select"/>
							<img src="../img/checkbox-a.png" v-if="isSelect" style="width: 16px;height: 16px;" @click="select"/>
							<span class=" sign_yc" style="margin-left: 10px"
							 @click="isShowRule">免责条款<span class="bookcion  sign_yc"></span></span>

							<button id="loginbtn" @click="register" >注册</button>
						
						</div>
						<div class="txt_login_k" v-if="isPsd">
							
							<div class="k_adress login_li  update_yc" v-if="isPsd">
								<span class="l_adress  login_icon"></span><input type="text" id="i_adress" class="txt_sr" placeholder="手机号" v-model="psd.phone"/>
							</div>
							<div class="k_name login_li  update_yc">
								<span class="l_name login_icon"></span><input type="text" id="i_name" class="txt_sr" placeholder="新密码" v-model="psd.password"/>
							</div>
							<div class="k_pwd login_li  update_yc">
								<span class="l_pwd login_icon"></span><input type="text" id="i_pwd" class="txt_sr" placeholder="确认新密码" v-model="psd.passwordNew"/>
							</div>
							
							<button id="updatebtn1" class=" update_yc" @click="resetPassword">提交</button>
						</div>
					</div>
				</div>
			</div>
			<!--免责条款-->

			<div class="zdc_1" id="zdc1" style="" v-if="showRule">
			</div>
			<div class="zdc_2" id="zdc2" style="position: fixed;" v-if="showRule">
				<span class="close_tk"  @click="isShowRule"></span>
				<div class="contbox" style="padding: 50px;">
					<h2 class="zdcTit" style="font-size: 30px;color: #222222;text-align: center">{{artData.title}}</h2>
					<div class="zdcText">
						<p style="font-size: 18px;color: #666666;line-height: 35px;">
							<div class="content ql-editor " style="clear: both;">
								<p class="p1 " v-html="artData.content"></p>
							</div>
			
					</div>
				</div>
			</div>
			</div>
		</div>


	</body>
	<script type="text/javascript">
		var app = new Vue({
			el: '#app',
			data: function() {
				return {

					is_toggle: true,
					isLogin: true,
					isPsd:false,

					submitData: {
						login_name: '',
						password: '',
						name:'',
						phone:'',
						address:'',
						thirdapp_id:2
					},
					psd:{
						phone:'',
						password:'',
						passwordNew:''
					},
					isSelect:false,
					artData:{},
					showRule:false
				}
			},
			
			created: function() {
				const self = this;
				console.log('window.my',window.my)
				console.log('window.base',window.base)
				self.init()
				
			},





			methods: {
				
				init: function(e) {
					const self = this;
					self.getArticleData();
					if (localStorage.getItem('user_token')) {
						window.location.href = './MyCenter.html'
					}

				},
				
				getArticleData() {
					const self = this;
					const postData = {};
					postData.searchItem = {
						thirdapp_id: 2,
					};
				
					postData.getBefore = {
						caseData: {
							tableName: 'Label',
							searchItem: {
								title: ['=', ['免责声明']],
							},
							middleKey: 'menu_id',
							key: 'id',
							condition: 'in',
						},
					};
					const callback = (res) => {
						if (res.info.data.length > 0) {
							self.artData = res.info.data[0];	
						} 
						
					};
					window.base.articleGet(postData, callback);
				},
				
				select(){
					const self = this;
					self.isSelect = !self.isSelect
				},
				
				isShowRule(){
					const self = this;
					self.showRule = !self.showRule
				},

				submit: function() {
					const self = this;
					const postData = {
						login_name: self.submitData.login_name,
						password: self.submitData.password,
					};
					var newObject = window.base.cloneForm(self.submitData);
					delete newObject.name;
					delete newObject.phone;
					delete newObject.address;
					delete newObject.thirdapp_id;
					if (window.base.checkComplete(newObject)) {
						const callback = (res) => {
							if (res.solely_code == 100000) {
								localStorage.setItem('user_token', res.token);
								localStorage.setItem('user_no', res.info.user_no);
								
								window.base.setStorageArray('user_info', res.info, 'id', 999, 'unshift');
								window.location.href = './MyCenter.html'
							} else {
								alert(res.msg)
							}
						}
						window.base.login(postData, callback);
					} else {
						alert('请输入账号密码', 'none')
					};
				},
				
				test(){
					const self = this;
					console.log(1111)
				},

				register() {
					const self = this;
					
					const postData = window.base.cloneForm(self.submitData)
					
					var newObject = window.base.cloneForm(self.submitData);
					var phone = newObject.phone;
					console.log('test',postData)
					if (window.base.checkComplete(newObject)) {
						if (phone.trim().length != 11 || !/^1[3|4|5|6|7|8|9]\d{9}$/.test(phone)) {
							
							alert('请输入正确的手机号码');
							return;
						}
						if(!self.isSelect){
							alert('请阅读条款并同意');
							return
						};
						const callback = (res) => {
							if (res.solely_code == 100000) {
								alert(res.msg)
								self.submitData = {
									login_name: '',
									password: '',
									name:'',
									phone:'',
									address:''
								};
								self.isLogin = true;
							} else {
								alert(res.msg)
							}
						}
						window.base.register(postData, callback);
					} else {
						alert('请补全信息', 'none')
					};
				},
				
				resetPassword() {
					const self = this;
					
					const postData = {
						phone:self.psd.phone,
						password:self.psd.password
					}
					
					var newObject = window.base.cloneForm(self.psd);
					
					console.log('test',postData)
					if (window.base.checkComplete(newObject)) {
						const callback = (res) => {
							if (res.solely_code == 100000) {
								alert(res.msg)
								self.psd = {
									passwordNew:'',
									password: '',
									
									phone:'',
									
								};
								self.isPsd = false;
							} else {
								alert(res.msg)
							}
						}
						window.base.resetPassword(postData, callback);
					} else {
						alert('请补全信息', 'none')
					};
				},

				changeType: function(type) {
					const self = this;
					console.log(111)
					console.log(type)
					if (type == "login") {
						self.isLogin = true
						self.isPsd = false
					} else if (type == "register") {
						self.isLogin = false
						self.isPsd = false
					}else if(type=='psd'){
						self.isPsd = true
						
					}
					console.log(self.isLogin)
				},

				intoPath: function(url, id) {
					const self = this;
					var toUrl = url;
					console.log(toUrl);
					window.location.href = toUrl + '?id=' + id;

				},

			}
		});
	</script>


</html>
<script>
	/*PC端*/
	var btnnav = document.getElementById("nav2btn");
	var nav2 = document.getElementById("nav2");
	var flag = true;
	btnnav.onclick = function() {
		if (flag) {
			nav2.classList.remove("ycxiala");
			nav2.classList.add("xiala");
			flag = false;
		} else {
			nav2.classList.remove("xiala");
			nav2.classList.add("ycxiala");
			flag = true;
		}
	}
	/*手机端*/
	var btnnav1 = document.getElementById("smnavbtn");
	var nav21 = document.getElementById("smnav2");
	var flag1 = true;
	btnnav1.onclick = function() {
		if (flag1) {
			nav21.classList.remove("smycxiala");
			nav21.classList.add("smxiala");
			flag1 = false;
		} else {
			nav21.classList.remove("smxiala");
			nav21.classList.add("smycxiala");
			flag1 = true;
		}
	}
</script>
